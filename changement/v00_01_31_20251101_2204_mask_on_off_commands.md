# 変更仕様 v0.1.31: 行と全体のマスクのon/offコマンドの追加

## 背景
- 既存のトグルコマンド（`toggleMaskLine`、`toggleMaskAll`）では、現在の状態を事前に知らないと確実な制御ができない
- Neovimのオートコマンド（`InsertEnter`、`InsertLeave`など）で自動的にマスクを制御したい場合、トグルコマンドだけでは状態の追跡が必要になり複雑
- スクリプトや自動化の際に、現在の状態に関係なく明示的にON/OFFを指定できるコマンドがあると便利

## 目的
- マスク状態を明示的にON/OFFできるコマンドを追加する
- オートコマンドやスクリプトでの自動制御を簡単にする
- トグルコマンドとON/OFFコマンドの両方を提供し、用途に応じて使い分け可能にする

## スコープ
- 行単位のマスクON/OFFコマンド（新規追加）
- ドキュメント全体のマスクON/OFFコマンド（新規追加）
- 既存のトグルコマンドは維持（後方互換性）

## 仕様（詳細）

### コマンド（新規追加）

#### 行単位のマスク制御
- **Cursor Code Prettifier: Mask Line On**
  - コマンドID: `cursorCodePrettifier.maskLineOn`
  - 対象: 現在のカーソルがある行（複数選択時は全選択行）
  - 動作: 対象行のマスクを確実にONにする（記号表示にする）
  - 実装: `docMaskOffLines`のSetから対象行番号を削除

- **Cursor Code Prettifier: Mask Line Off**
  - コマンドID: `cursorCodePrettifier.maskLineOff`
  - 対象: 現在のカーソルがある行（複数選択時は全選択行）
  - 動作: 対象行のマスクを確実にOFFにする（元のLaTeX表示にする）
  - 実装: `docMaskOffLines`のSetに対象行番号を追加

#### ドキュメント全体のマスク制御
- **Cursor Code Prettifier: Mask All On**
  - コマンドID: `cursorCodePrettifier.maskAllOn`
  - 対象: 現在アクティブなドキュメント
  - 動作: ドキュメント全体のマスクを確実にONにする
  - 実装: `docMaskAll`のMapで該当URIを`true`に設定

- **Cursor Code Prettifier: Mask All Off**
  - コマンドID: `cursorCodePrettifier.maskAllOff`
  - 対象: 現在アクティブなドキュメント
  - 動作: ドキュメント全体のマスクを確実にOFFにする
  - 実装: `docMaskAll`のMapで該当URIを`false`に設定

### 既存コマンドとの関係
- 既存のトグルコマンド（`toggleMaskLine`、`toggleMaskAll`）は維持
- ON/OFFコマンドはトグルコマンドとは独立して動作
- 優先順位や動作ロジックは既存仕様と同じ（ドキュメント全体 > 行単位 > 通常マスク）

### ログ出力
- `maskLineOn`: `[prettifier] line: masked on lines=<n>`
- `maskLineOff`: `[prettifier] line: masked off lines=<n>`
- `maskAllOn`: `[prettifier] doc: masked on document`
- `maskAllOff`: `[prettifier] doc: masked off document`

### Neovim統合での使用例
```lua
-- インサートモードに入ったときにマスクをOFF
vim.api.nvim_create_autocmd("InsertEnter", {
  callback = function()
    vim.fn.VSCodeCall("cursorCodePrettifier.maskLineOff")
  end,
})

-- ノーマルモードに戻ったときにマスクをON
vim.api.nvim_create_autocmd("InsertLeave", {
  callback = function()
    vim.fn.VSCodeCall("cursorCodePrettifier.maskLineOn")
  end,
})
```

## 受け入れ基準
- 行マスクONコマンドを実行すると、対象行が確実にマスクON（記号表示）になる
- 行マスクOFFコマンドを実行すると、対象行が確実にマスクOFF（元のLaTeX表示）になる
- ドキュメント全体マスクON/OFFコマンドも同様に確実に動作する
- 既存のトグルコマンドの動作に影響を与えない
- 複数行選択時に全選択行に対して一括処理される
- ログ出力が適切に記録される
- Neovimのオートコマンドから呼び出して期待通りに動作する
