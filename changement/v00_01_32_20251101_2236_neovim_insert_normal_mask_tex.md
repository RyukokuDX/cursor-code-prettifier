# 変更仕様 v0.1.32: Neovimインサート/ノーマルモードでのマスク自動切り替え

## 背景
Neovimを使用して.texファイルを編集する際、現在はマスクのオン/オフを手動で切り替える必要がある。編集効率を向上させるため、Vimのモードに応じて自動的にマスクを切り替える機能が求められている。

インサートモードでは実際のLaTeXコマンドを見ながら編集したいため、カーソル行のマスクをオフにしたい。一方、ノーマルモードでは可読性を優先するため、マスクをオンにしたい。

## 目的
Neovimを使用している場合、.texファイルにおいて以下を実現する：
- インサートモードに切り替えた際、カーソル行のマスクを自動的にオフにする
- ノーマルモードに切り替えた際、マスクを自動的にオンにする
- これにより、編集時は元のコードが見え、閲覧時は見やすい表示になる

## スコープ
- .texファイルおよび.latexファイルに適用
- Neovimを使用している環境でのみ動作
- カーソル行のマスク制御に限定（全行のマスク制御ではない）

## 仕様（詳細）

### 機能要件
1. **Neovim環境の検出**
   - エディタ環境がNeovimであることを検出する仕組みを実装
   - Neovimでない環境ではこの機能は無効

2. **モード変更の監視**
   - Neovimのモード変更イベントを監視
   - インサートモードに入った際にイベントを検知
   - ノーマルモードに戻った際にイベントを検知

3. **インサートモード時の動作**
   - インサートモードに入った際、カーソル行のマスクをオフにする
   - 既存の`cursorCodePrettifier.maskLineOff`コマンドを活用するか、同等の機能を実装

4. **ノーマルモード時の動作**
   - ノーマルモードに戻った際、マスクをオンにする
   - 既存の`cursorCodePrettifier.maskLineOn`コマンドを活用するか、同等の機能を実装

5. **設定オプション**
   - この機能を有効/無効にする設定オプションを追加（例: `cursorCodePrettifier.neovimAutoMaskToggle`）
   - デフォルトは無効（既存の動作を保持）

### 技術要件
- Neovimとの連携方法を調査・実装
- モード変更イベントの取得方法を確立
- カーソル行の特定とマスク制御の実装
- VS Code拡張機能としての実装方法を検討

## 受け入れ基準
1. Neovimを使用して.texファイルを開いた際、この機能が正しく動作する
2. インサートモードに入ると、カーソル行のマスクが自動的にオフになる
3. ノーマルモードに戻ると、マスクが自動的にオンになる
4. 設定オプションにより、この機能を有効/無効にできる
5. Neovim以外の環境では、この機能が無効であり、既存の動作に影響しない
6. 既存のマスク関連の機能と競合しない
